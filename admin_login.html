<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion Admin - OrdoPass</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body{
background:linear-gradient(135deg,#1a237e,#283593);
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
font-family:Segoe UI,sans-serif;
}
.box{
background:#fff;
width:100%;
max-width:420px;
border-radius:16px;
padding:35px;
box-shadow:0 15px 40px rgba(0,0,0,.3);
}
h2{text-align:center;color:#1e3c72;margin-bottom:25px}
input,select{
width:100%;
padding:14px;
margin-bottom:15px;
border-radius:10px;
border:2px solid #ddd;
font-size:15px;
}
button{
width:100%;
padding:14px;
border:none;
border-radius:10px;
background:#1e3c72;
color:white;
font-size:16px;
font-weight:600;
cursor:pointer;
}
button:hover{opacity:.9}
.alert{
padding:12px;
border-radius:8px;
margin-bottom:15px;
display:none;
}
.alert.error{background:#fee2e2;color:#7f1d1d}
.alert.success{background:#d1fae5;color:#065f46}
</style>
</head>
<body>
<div class="box">
<h2>üîê Connexion Administrateur</h2>
<div id="msg" class="alert"></div>
<form id="loginForm">
<input type="text" id="username" placeholder="Nom utilisateur" required>
<input type="password" id="password" placeholder="Mot de passe" required>
<select id="role" required>
<option value="">Choisir r√¥le</option>
<option value="admin">Admin</option>
<option value="medecin">M√©decin</option>
<option value="pharmacien">Pharmacien</option>
</select>
<button type="submit">Se connecter</button>
</form>
</div>
<script>
document.getElementById("loginForm").addEventListener("submit", async e => {
 e.preventDefault();
 const msg=document.getElementById("msg");
 const username=document.getElementById("username").value;
 const password=document.getElementById("password").value;
 const role=document.getElementById("role").value;
 try{
  const res=await fetch(
   "/api/auth/login",
   {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({username,password,role})
   }
  );
  const data=await res.json();
  if(!res.ok) throw new Error(data.error);
  localStorage.setItem("token",data.token);
  msg.textContent="‚úÖ Connexion OK";
  msg.className="alert success";
  msg.style.display="block";
  setTimeout(()=>{
    location.href="admin_dashboard.html";
  },1200);
 }catch(err){
  msg.textContent="‚ùå "+err.message;
  msg.className="alert error";
  msg.style.display="block";
 }
});
</script>
</body>
</html>